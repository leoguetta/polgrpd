\documentclass{amsart}

\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{amsmath}

\usepackage{tikz-cd}
\usepackage{leftindex}
\usepackage[capitalise]{cleveref}
\usepackage[all,2cell]{xy}
\UseAllTwocells
\usepackage{bm} %bold math symbols

\usepackage{marginnote}

\title{A polygraphic approach to the homology of categories with general twisted
coefficients}
\author{Léonard Guetta}
\email{l.s.guetta@uu.nl}
\address{Budapestlaan, Utrecht}
\date{\today}
\input{macro}

\newcommand{\M}{\mathcal{M}}
\newcommand{\B}{\mathcal{B}}
\newcommand{\Bimod}[1]{\mathrm{Bimod}_{#1}}
\newcommand{\Tw}[1]{\mathrm{Tw}(#1)}
\newcommand{\Nat}[1]{\mathrm{Nat}(#1)}
\newcommand{\HHo}{\mathsf{HHo}}
\newcommand{\Tot}{\mathrm{Tot}}
\newcommand{\id}{\mathrm{id}}
\newcommand{\src}[1]{\source{} #1}
\newcommand{\tgt}[1]{\target{} #1}
\renewcommand{\sce}[1]{\source{} #1}
\renewcommand{\tge}[1]{\target{} #1}
\newcommand{\srclin}{\sigma}
\newcommand{\tgtlin}{\tau}
\renewcommand{\homset}[3]{\mathrm{Hom}_{#1}(#2,#3)}
\newcommand{\wght}[1]{\mathrm{w}_{#1}}
\newcommand{\tw}[1]{\mu(#1)} %Total weight
\newcommand{\inv}[1]{L_{#1}} %Groupoidification functor

\newcommand{\Ni}{\N\cup\set{\omega}} %Entiers naturels + omega
\begin{document}
\maketitle
\section{Homological algebra}
\subsection{Category of modules}
\begin{definition}
  Let $C$ be a (small) category. A \emph{right $C$\nbd-module} is a
  functor
  \[
    F \colon C^{\op} \to \Ab.
  \]
  A \emph{morphism of right $C$\nbd-modules} is a natural
  transformation. We denote by $\RMod{C}$ the category of right
  $C$\nbd-modules. Dually, a \emph{left $C$\nbd-module} is a functor
  \[
    C \to \Ab.
  \]
  The category of left $C$\nbd-module is denoted by $\LMod{C}$.
\end{definition}
\begin{example}
  If $C=G$ is a group, then left and right $C$\nbd-modules
  respectively correspond
  exactly to left and right $\Z[G]$\nbd-modules. 
\end{example}

As we shall now see, the abelian categories $\RMod{C}$ and $\LMod{C}$
have enough projectives. Since $\LMod{C}=\RMod{C^{\op}}$, it suffices
to treat the case of right modules.

\begin{definition}
  A right $C$\nbd-modules $M$ is free if it is isomorphic to a small
  sum
  of ``representables'' modules
  \[
  M \simeq \bigoplus_{i \in I}\Z\homset{C}{-}{c_i},
\]
and dually for left $C$\nbd-modules.
\end{definition}
\begin{lemma}\label{lemma:freeisproj}
  Free modules are projective objects of $\RMod{C}$.
\end{lemma}
\begin{proof}
  This follows straightforwardly from the Yoneda lemma and the fact
  that a sum of projective objects is projective.
\end{proof}
\begin{proposition}\label{prop:enoughproj}
  The category $\RMod{C}$ has enough free objects (and thus enough projectives).
\end{proposition}
\begin{proof}
  Let $F$ be an object of $\RMod{C}$. Consider the canonical
  morphism
  \[
    \bigoplus_{\substack{c \in \Ob(C)\\ x \in F(c)}} \Z\homset{C}{-}{c} \to F.
  \]
 It follows from the Yoneda lemma that this morphism is
  an epimorphism. The conclusion follows from \cref{lemma:freeisproj}.
\end{proof}
\subsection{Total tensor product}
We fix once and for all a small category $C$.
\begin{paragr}
   Let $F$ be a right $C$\nbd-module and $G$ a left $C$\nbd-module. We
  define their total tensor product, denoted by $F\tens_{\Z C}G$, as the
  following co-end in $\Ab$
  \[
    F\tens_{\Z C}G := \int^{c \in C}F(c)\tens_{\Z} G(c),
  \]
  where $\otimes$ is the usual tensor product of abelian
  groups. Explicitly, this means that $F\tens_{\Z C}G$ is obtained as the following
  co-equalizer in $\Ab$
  \[
    \bigoplus_{(c,c')\in \Ob(C)^2}F(c')\tens_{\Z}\Z\homset{C}{c}{c'}\tens_{\Z}
    G(c) \rightrightarrows \bigoplus_{c \in \Ob(C)}F(c)\tens_{\Z} G(c)
    \rightarrow F\tens_{\Z C}G,
  \]
  where the top arrow is induced by the functoriality of $F$ and the
  bottow arrow by the functoriality of $G$. This construction canonically extends to a functor
  \[
    - \tens_{\Z C} - \colon \RMod{C}\times\LMod{C} \to \Ab.
  \]
  It is straightforward to check that this functor is a left adjoint
  in each variable. More precisely, we have isomorphisms
  \[
    \begin{aligned}
      \homset{\Ab}{F\tens_{\Z C}G}{A}&\simeq
                                  \homset{\RMod{C}}{F}{\homset{\Ab}{G(-)}{A}}\\
      &\simeq \homset{\LMod{C}}{G}{\homset{\Ab}{F(-),A}}
    \end{aligned}
  \]
  natural in $F$, $G$ and $A$. In particular, $-\tens_{\Z C}-$ preserves
  epimorphisms in each variable and thus is right exact in each
  variable. Together with \cref{prop:enoughproj}, this justifies the
  following definition.
\end{paragr}

\begin{definition}
  Let $F$ be a right $C$\nbd-module and $G$ a left $C$\nbd-module. For
  an integer $k \geq 0$, we
  define the abelian group $\Tor{\Z C}{k}(F,G)$ as
  \[
    \Tor{\Z C}{k}(F,G) := F \overset{\mathbb{L}_k}{\tens_{\Z C}} G,
  \]
  where $\overset{\mathbb{L}_k}{\tens_{\Z C}}$ is the $k$\nbd-th left
  derived functor of $-\tens_{\Z C}-$.
\end{definition}
\begin{paragr}
  Explicitly, the previous definition means that $\Tor{\Z C}{k}(F,G)$ is
  obtained by either taking a projective resolution
  \[
    P_{\bullet} \to F
  \]
  of $F$ (in $\RMod{C}$), or a projective resolution
  \[
    Q_{\bullet} \to G
  \]
  of $G$ (in $\LMod{C}$) and taking the $k$\nbd-th homology group of
  either the following chain complexes of abelian groups
  \[P_{\bullet}\tens_{\Z C}G,\]
  \[F\tens_{\Z C}Q_{\bullet},\]
    \[\Tot(P_{\bullet}\tens_{\Z C}Q_{\bullet}). \]
  By standard results of homological algebra, these three complexes
  have the same homology. 
\end{paragr}
\begin{paragr}
  Let $u \colon C \to D$ be a functor between small categories.  As usual, we obtain an adjoint triple
  \[
    \begin{tikzcd}
      \LMod{D} \ar[r,"u^*" description,""{name=B,above},""{name=C,below}] &
      \LMod{C},\ar[l,"u_!"',bend right=50,""{name=A,below}]
      \ar[l,"u_*",bend left=50,""{name=D,above}]
      \ar[from=A,to=B,"\bot" description, phantom]
      \ar[from=C,to=D,"\bot" description, phantom]
    \end{tikzcd}
  \]
  where $u^*$ is the pre-composition functor. (And similarly for
  categories of right modules). By standard manipulation of
  homological algebra, one shows that
  \begin{itemize}
  \item $u_!$ is right exact, $u_*$ is left exact, $u^*$ is exact,
  \item $u_!$ preserves projective objects and $u_*$ preserves
    injective objects.
  \end{itemize}

  Recall now that a functor $\pi \colon C \to D$ is a discrete
  op-fibration if for every arrow of $D$ of the form $g\colon \pi(c) \to
  d$, there exists a \emph{unique} arrow $f \colon c \to c'$ such
  that $\pi(f)=g$. 
\end{paragr}
\begin{proposition}\label{prop:toropfib}
  Let $\pi \colon C \to D$ a discrete op-fibration, $M$ a right
  $D$\nbd-module and $N$ a left $C$\nbd-module. We have an
  isomorphism
  \[
  \Tor{\Z C}{\bullet}(\pi^*M,N) \simeq \Tor{\Z D}{\bullet}(M,\pi_!N),
  \]
  natural in $M$ and $N$.
\end{proposition}
\begin{proof}
  Let us start by proving the underived version of this isomorphism,
  that is
  \[
   \pi^*M\tens_{\Z C} N \simeq M\tens_{\Z D}\pi_!N.
 \]
 First, recall that, because $\pi$ is a discrete op-fibration, for every
 object $d$ of $D$, the
 canonical inclusion
 \[
   \begin{aligned}
     \pi_d &\to \tr{C}{d}\\
     c &\mapsto (c,\id_{d} \colon \pi(c) \to d)
   \end{aligned}
 \]
 where $\pi_d$ is the fiber of $\pi$ at $d$, is a right adjoint (this
 is true for non-necessarily discrete op-fibration). In particular,
 this canonical inclusion is co-final and it follows that for every
 object $d$ of $D$, we have
 \[
   (\pi_!N)(d) = \ilim_{f \colon \pi(c) \to d \in \tr{C}{d}}N(c) \simeq
   \bigoplus_{c \in \pi_d}N(c).
 \]

 Now, by definition $M\tens_{\Z D}\pi_!N$ is the co-equalizer of the
 following pair
 \[
   \bigoplus_{(d,d') \in
     \Ob(D)^2}M(d')\tens_{\Z}\Z\homset{D}{d}{d'}\tens_{\Z}(\pi_!N)(d)
   \rightrightarrows \bigoplus_{d \in \Ob(D)}M(d)\tens_{\Z}(\pi_!N)(d).
 \]
 It follows from what we have seen above that this pair can be
 re-written as
 \[
   \bigoplus_{(d,d') \in
     \Ob(D)^2}\bigoplus_{c \in
     \pi_d}M(d')\tens_{\Z}\Z\homset{D}{d}{d'}\tens_{\Z}N(c)
   \rightrightarrows \bigoplus_{d \in \Ob(D)}\bigoplus_{c \in
     \pi_d}M(d)\tens_{\Z}N(c).
 \]
 Using the fact that \[\Ob(C)\simeq\coprod_{d \in \Ob(D)}\pi_d,\] and that
 \[
   \coprod_{(c,c')\in \Ob(C)^2}\homset{C}{c}{c'} \simeq
   \coprod_{(d,d') \in \Ob(D)^2}\coprod_{c\in \pi_d}\homset{D}{d}{d'},
 \]
 where this last isomorphism follows from the fact that $\pi$ is a
 discrete op-fibration, we can re-write the pair as
 \[
   \bigoplus_{(c,c') \in
     \Ob(C)^2}M(\pi(c'))\tens_{\Z}\Z\homset{C}{c}{c'}\tens_{\Z}N(c)\rightrightarrows
   \bigoplus_{c \in \Ob(C)}M(\pi(c))\tens_{\Z}N(c),
 \]
 whose co-equalizer is, by definition, $\pi^*M\tens_{\Z C}N$.

 For the derived version, it suffices to use that $\pi^*$ is exact and
 preserve projective objects. Hence, if $P_{\bullet} \to M$ is a projective
 resolution of $M$, then $\pi^*P_{\bullet} \to \pi^*M$ is a projective
 resolution of $\pi^*M$. It follows that
 \[
   \pi^*P_{\bullet}\tens_{\Z D}N \simeq P_{\bullet}\tens_{\Z C}\pi_!N,
 \]
 which proves the result.
\end{proof}
\subsection{Bi-modules and natural systems}
\begin{definition}
  Let $C$ be a (small) category. A \emph{($C,C$)\nbd-bimodule}, or
  \emph{bimodule over $C$}, is a left $C^{\op} \times C$\nbd-module,
  i.e.\ a functor $\B \colon C^{\op} \times C \to \Ab$.

  \end{definition}
  We denote by
  $\Bimod{C}=\LMod{C^{\op}\times C}$ the category of bimodules.
\begin{paragr}
  Given a right $C$\nbd-module $M$ and a left $C$\nbd-module $N$, we
  define the bimodule $M\tens_{\Z}N$ as 
  \[
    (c,d) \mapsto M(c)\tens_{\Z} N(d).
  \]
  This construction is obviously functorial and thus yields a functor
  \[
    \begin{aligned}
      \RMod{C}\times \LMod{C} \to \Bimod{C}\\
      (M,N) \mapsto M\tens_{\Z} N.
    \end{aligned}
  \]
  It is straightforward to check that this functor is a left adjoint
  in both variable. In particular, it preserves epimorphisms in each
  variable and thus is right exact in each variable. 
\end{paragr}
\begin{lemma}\label{tensfreemod}
  The functor $-\tens_{\Z}- \colon\RMod{C}\times \LMod{C} \to
  \Bimod{C}$ sends free modules to free modules.
\end{lemma}
\begin{proof}
  It suffices to notice that
  \[
    \begin{aligned}
      \Z\homset{C}{-}{c}\tens_{\Z}\Z\homset{C}{d}{-}&=\Z\homset{C^{\op}}{c}{-}\tens_{\Z}\Z\homset{C}{d}{-}\\
                                                   &\simeq\Z\left[\homset{C^{\op}}{c}{-}\times\homset{C}{d}{-}\right]\\
      &=\Z\homset{C^{\op}\times C}{(c,d)}{(-,-)}.      
    \end{aligned}
  \]
  The conclusion follows from the fact that $-\tens_{\Z}-$ preserves
  sums in each variable. 
\end{proof}
\begin{paragr}
  Notice that every category $C$ comes with a canonical bi-module
  given by the hom functor
  \[
    \Z \homset{C}{-}{-}.
  \]
  This bi-module will play an important role later.
\end{paragr}
\begin{paragr}
  Recall that the \emph{twisted arrow category} (also called the
  factorization category), denoted by $\Tw{C}$, is the category whose
  objects are morphisms $w \colon c \to d$ of $C$, and whose morphisms
  $w \to w'$ are given by pairs $(f\colon c' \to c,g\colon d \to d')$
  of $C$ such that the following square is commutative
  \[
    \begin{tikzcd}
      c \ar[r,"w"] & d \ar[d,"g"] \\
      c' \ar[u,"f"] \ar[r,"w'"] & d'.
    \end{tikzcd}
  \]
\end{paragr}
\begin{definition}
  A \emph{natural system} over a category $C$ is a right $\Tw{C}$
  module,i.e.\ a functor $\M \colon (\Tw{C})^{\op} \to \Ab$.
\end{definition}
We denote by $\Nat{C}=\RMod{\Tw{C}}$ the category of natural systems on $C$.
\subsection{Homology with coefficient}
\begin{paragr}
  For any (small) category $D$ and an abelian group $A$ we will denote by $\cst{A}$ the
  constant functor $D \to \Ab$ with value $A$.%  In particular, for a
  % category $C$, by taking $D$ to be either of the following category
  % \[
  % C, \quad C^{\op}, \quad
  % C^{\op}\times C, \quad \Tw{C},\] $\cst{A}$ can denote, depending on the context, a left $C$\nbd-module, a right
  % $C$\nbd-module, a bimodule over $C$ or a natural system over $C$.
\end{paragr}

\begin{definition}
  Let $C$ be a small category. The \emph{Baues-Wirsching homology of
    $C$ with coefficient in a natural system $\M$} is defined as
  \[
    \Ho^{BS}_{\bullet}(C,\M):=\Tor{\Z \Tw{C}}{\bullet}(\M,\cst{\Z}).
  \]
  The \emph{Hochschild homology of $C$ with coefficient in a bimodule
    $\B$ over $C$} is defined as
  \[
    \HHo_{\bullet}(C,\B):=\Tor{\Z (C^{\op}\times C)}{\bullet}(\B,\Z \homset{C}{-}{-}).
  \]
  The \emph{homology of $C$ with coefficient in a right (resp.\ 
    left) module $M$ over $C$} is defined as
  \[
    \Ho_{\bullet}(C,M):=\Tor{\Z C}{\bullet}(M,\cst{\Z})\quad (\text{resp.\
    } :=\Tor{\Z C}{\bullet}(\cst{\Z},M) ).
  \]
\end{definition}
% \begin{definition}
%   Let $C$ be a small category. We define its \emph{homology $\Ho_{\bullet}(C)$} as the
%   graded abelian group
%   \[
%     \Ho_{\bullet}(C):=\Tor{C}{\bullet}(\Z,\Z).
%   \]
%   More generally, if $M$ is a right $C$\nbd-module, we define the
%   \emph{homology $\Ho_{\bullet}(C,M)$ of $C$ with coefficient $M$} as the
%   graded abelian group
%   \[
%     \Ho_{\bullet}(C,M):=\Tor{C}{\bullet}(M,\Z).
%   \]
% \end{definition}
% \begin{remark}
%   We could also have defined the homology of $C$ with coefficient a left
%   $C$\nbd-module $N$ as $\Tor{C}{\bullet}(\Z,N)$. No generality is
%   lost as we
%   have \[\Tor{C}{\bullet}(\Z,N)=\Tor{C^{\op}}{\bullet}(N,\Z).\]
%   In other words, the homology of $C$ with coefficient a left
%   $C$\nbd-module $N$ is the homology of $C^{\op}$ with coefficient $N$
%   seen a right $C^{\op}$\nbd-module.
% \end{remark}

We are now going to compare these different homologies. Let's start
with the Baues-Wirsching and Hochschild homologies.

\begin{paragr}
  Let $\pi \colon \Tw{C} \to C^{\op}\times C$ be the canonical
  projection. This is a discrete opfibration, and it is
  straightforward to check that
  \[
    \pi_!(\cst{\Z})\simeq \Z\homset{C}{-}{-}.
  \]
\end{paragr}
Applying \cref{prop:toropfib}, we obtain the following proposition.
\begin{proposition}
  Let $C$ be a small category and $\B$ a bimodule over $C$, then we
  have a canonical isomorphism
  \[
    \Ho_{\bullet}^{BS}(C,\pi^*\B)\simeq \HHo_{\bullet}(C,\B).
  \]
\end{proposition}

Let us now compare Hochschild homology and homology with coefficient in
a module. The most general comparison takes the following form.
\begin{proposition}
  Let $C$ be a small category, $M$ a right $C$\nbd-module and $N$ a
  left $C$\nbd-module. We have an isomorphism
  \[
    \HHo_{\bullet}(C,M\tens_{\Z}N)\simeq \Tor{\Z C}{\bullet}(M,N).
  \]
\end{proposition}
\begin{proof}
  Let us start with the underived version of this isomorphism, that is
  to say
  \[
    (M\tens_{\Z}N)\tens_{\Z C^{\op}\times C}\Z\homset{C}{-}{-} \simeq M\tens_{\Z C} N.
  \]
  This follows from the following abstract non-sense co-end calculus
  \[
    \begin{aligned}
     (M\tens_{\Z}N)\tens_{\Z C^{\op}\times C}\Z\homset{C}{-}{-} &=
                                                                \int^{(c,d)\in
                                                                \Ob(C^{\op}\times
                                                                C)}M(c)\tens_{\Z}N(d)\tens_{\Z}\Z\homset{C}{c}{d}\\ 
      &\simeq\int^{c \in C^{\op}}M(c)\tens_{\Z}\left(\int^{d \in
        C}N(d)\tens_{\Z}\Z\homset{C}{c}{d}\right)\\
                                                              &\simeq\int^{c\in C^{\op}}M(c)\tens_{\Z}N(d)\\
      &=M\tens_{\Z C}N,
    \end{aligned}
  \]
  where the second to last isomorphism comes from the Yoneda
  lemma. For the derived version, let $F_{\bullet} \to M$ and
  $G_{\bullet} \to N$ free resolutions. By definition, we have
  \[
    \Tot_k(P_{\bullet}\tens_{\Z}Q_{\bullet})=\bigoplus_{i+j=k}P_i\tens_{\Z}Q_j.
  \]
  By \cref{tensfreemod}, each $P_i\tens_{\Z}Q_j$ is a free left
  $C^{\op}\times C$ module and since a sum of free objects is
  free, we get that
  $\Tot_k(P_{\bullet}\tens_{\Z}Q_{\bullet})$ is free and thus
  projective by \cref{lemma:freeisproj}. It follows that
  \[
    \Tot(P_{\bullet}\tens_{\Z}Q_{\bullet}) \to M\tens_{\Z}N
  \]
  is a projective resolution of $M\tens_{\Z}N$. Hence,
  $\HHo_{\bullet}(C,M\tens_{\Z}N)$ can be taken to be the homology of
  the left hand side of the following isomorphism
  \[
    \left(\Tot(P_{\bullet}\tens_{\Z}Q_{\bullet})\right)\tens_{\Z C^{\op}\times C}\Z
    \homset{C}{-}{-}\simeq \Tot(P_{\bullet}\tens_{\Z}Q_{\bullet}).
  \]
  The homology of the right hand side being $\Tor{\Z C}{\bullet}(M,N)$,
  this proves the result.
\end{proof}
% \begin{paragr}
%   Let $\pi \colon \Tw{C} \to C^{\op}\times C$ be the canonical
%   projection functor. As usual, we obtain an adjoint triple
%   \[
%     \begin{tikzcd}
%       \LMod{C^{\op}\times C} \ar[r,"\pi^*" description] &
%       \LMod{\Tw{C}}.\ar[l,"\pi_!"',bend right] \ar[l,"\pi_*",bend left]
%     \end{tikzcd}
%   \]
%   By a straightforward computation, one checks that, for $\M$ a
%   natural system over $C$, $\pi_!(\M)$ is given by the following formula
%   % \[
%   %   \pi_!(\B) = \bigoplus_{w}
%   % \]
% \end{paragr}
Combining the previous two propositions, we obtain the following corollary.
\begin{corollary}
  Let $C$ be a small category and $M$ a right (resp.\ left)
  $C$\nbd-module. We have
  \[
    \Ho^{BS}_{\bullet}(C,\pi^*p^*(M))\simeq \HHo_{\bullet}(C,p^*(M))\simeq \Ho_{\bullet}(C,M),
  \]
  where $p$ is the projection $C^{\op}\times C \to C^{\op}$ (resp.\
  $C^{\op}\times C \to C$).
\end{corollary}
In other words, Baues-Wirsching homology is the most general one as
it allows to recover the other ones.
\section{Recollection of the theory of strict $\omega$-categories}
\subsection{Strict $\omega$-categories}
% \begin{paragr}
%   For any $n \geq 1$, we denote by $\nCat{n}$ the category of
%   (strict) $n$\nbd-categories, that is the category of categories
%   enriched in $\nCat{n-1}$, with $\nCat{0}$ being simply the category
%   of sets $\Set$. The canonical  functor $\Cat \to
%   \Set$, which sends a category to its underlying set of objects, induces inductively a truncation function
%   \[
%     \trk{n-1} \colon \nCat{n} \to \nCat{n-1},
%   \]
%   which forget the $n$\nbd-cells of an $n$\nbd-category. We then define the category of
%   \oo\nbd-categories $\oCat$ as the limit of the following diagram
%   \[
%     \cdots \overset{\trk{2}}{\longrightarrow} \nCat{2} \overset{\trk{1}}{\longrightarrow}\nCat{1}
%     \overset{\trk{0}}{\longrightarrow} \nCat{0}.
%   \]
% \end{paragr}
\begin{paragr}
  Recall that a strict \oo-category $C$ consists of:
  \begin{itemize}
  \item a sequence of sets
  $(C_n)_{n\geq 0}$, whose elements $x \in C_n$ referred to as
  \emph{$n$\nbd-cells},
\item for all $i < j$, source and target maps
  \[
    \src_{i}^j,\tgt_{i}^j \colon C_j \rightrightarrows C_{i}
  \]
  such that for all $i < j <k$, they satisfy the globular identities:
  \[
    \begin{cases}
      \src_i^j \circ \src_{j}^k &= \src_{i}^j\circ \tgt_{j}^k =\src_i^k\\
      \tgt_{i}^j\circ \tgt_{j}^k &= \tgt_{i}^j \circ \src_{j}^k=\tgt_i^k,
    \end{cases}
  \]
  (for $j=i+1$, we will simply write $\src=\src_i^{i+1}$ and
  $\tgt=\tgt_i^{i+1}$), we say that a pair $(x,y)$ of $j$\nbd-cells
  are \emph{parallel} if $\src(x)=\src(y)$ and $\tgt(x)=\tgt(y)$,
\item for all $i < j$, unit maps
  \[
    \unit{j}{i} \colon C_i \to C_j,
  \]
  such that for all $i < j < k$, we have
  \[
    \unit{k}{j}\circ \unit{j}{i}=\unit{k}{i}.
  \]
  (for $j=i+1$, we will write $\unit{}{x}$ instead of $\unit{i+1}{i}(x)$)
\item for all $i < j$, compositions maps
  \[
    -\comp{i}- \colon C_j \times_{C_i} C_j \to C_j,
  \]
  where the fibred product is taken along $\src_i^j \colon C_j \to
  C_i$ for the first factor and $\tgt_i^j \colon C_j \to C_i$ for the
  second factor; we say that a pair $(x,y)$ of $j$\nbd-cells is
  \emph{$\comp{i}$\nbd-composable} if it belongs to $C_j \times_{C_i} C_j$.
\end{itemize}
All this data is subject to the usual axioms (see \cite[Section 14.2]{abgmmm:polybk} for example):
\begin{itemize}
  \item strict associativity of compositions,
  \item strict units,
  \item strict functoriality of units,
  \item  exchange rule between $\comp{i}$ and $\comp{j}$, for any
    $i <j$.
  \end{itemize}

  A strict \oo\nbd-functor $f \colon C \to D$ (also sometimes simply
  referred to as \emph{functor}) consists of a sequence of functions
  $(f_n \colon C_n \to D_n)_{n \geq 0}$,
  which respects sources, targets, units and compositions strictly. We
  denote by $\oCat$ the category of strict \oo-categories and
  \oo\nbd-functors.
\end{paragr}
\emph{ From now on, we shall always drop the adjective
  ``strict'' and simply speak ``\oo\nbd-categories'' and
  ``\oo\nbd-functors''.}
\begin{paragr}
  For any $n \in \N$, there is an analogous notion of
  $n$\nbd-category, whose definition is the same as for \oo, but
  with only a finite sequence of sets of cells
  $(C_k)_{0 \leq k \leq n}$,
  and similarly for $n$\nbd-functors. We will denote by $\nCat{n}$ the
  category of $n$\nbd-categories and $n$\nbd-functors. For $n=1$, we
  will use the more standard notation $\Cat$ instead of $\nCat{1}$.

  There are obvious truncation functors
  \[
    \trk{n} \colon \oCat \to \nCat{n},
  \]
  which simply forgets all the cells of dimension $> n$. Each of these
  functors has a left adjoint
  \[
    \nCat{n} \to \oCat,
  \]
  which simply adds all units on cells of dimension lower or equal
  than $n$. This left adjoint is fully faithful and also has further
  left adjoint. This allows us to harmlessly identify the category
  $\nCat{n}$ with its essential image in $\oCat$, which consists of
  these categories with only unit cells above dimension $n$.
\end{paragr}
\begin{paragr}
  For $n\geq 0$, we denote by $\Dsk{n}$ the $n$\nbd-category with only
  one cell $e_n$ in dimension $n$, and exactly two non-trivial cells
  in any dimension $k<n$, given by $\src^n_k(e_n)$ and
  $\tgt^n_k(e_n)$. In low dimension, this gives
  \[
    \Dsk{0}=\bullet,\quad \Dsk{1}=\bullet \to \bullet,\quad
    \Dsk{2}=
    \begin{tikzcd}
      \bullet \ar[r,bend left,""{name=A,below}] \ar[r,bend
      right,""{name=B,above}] & \bullet
      \ar[from=A,to=B,Rightarrow]
    \end{tikzcd}
    ,\quad \cdots
  \]
  The $n$\nbd-category $\Dsk{n}$ corepresents the ``underlying set of $n$\nbd-cells'' functor $\oCat \to \Set, C
  \mapsto C_n$. For an $n$\nbd-cell $x$ of an \oo\nbd-category $C$, we
  will denote by 
  \[
    \langle x \rangle \colon \Dsk{n} \to C
  \]
  the corresponding \oo\nbd-functor.

  We denote by $\Sph{n-1}:=\trk{n-1}(\Dsk{n})$ (with $\Sph{-1}=\emptyset$)
  and
  \[
    i_n \colon \Sph{n-1} \to \Dsk{n}
  \]
  the canonical inclusion. In low dimension, this gives
  \[
    \Sph{-1}=\emptyset,\quad \Sph{0}=\bullet \quad \bullet,\quad
    \Sph{1}=
    \begin{tikzcd}
      \bullet \ar[r,bend left,""{name=A,below}] \ar[r,bend
      right,""{name=B,above}] & \bullet
    \end{tikzcd}
    ,\quad \cdots
  \]
  The set of \oo\nbd-functors $\Sph{n} \to C$ is in canonical
  bijection with the set of pairs of parallel $n$\nbd-cells of
  $C$. For such a pair $(x,y)$, we will denote by $\langle x,y
  \rangle\colon \Sph{n}\to C$ the corresponding \oo\nbd-functor.
\end{paragr}
\begin{paragr}
  A $j$\nbd-cell $x$ of an \oo-category is called
  $\comp{i}$\nbd-invertible, with $i<j$, if there exists a
  $j$\nbd-cell $\overline{x}$ with
  \[
    \src^i_j(\overline{x})=\tgt^i_j(x) \text{ and } \tgt^i_j(\overline{x})=\src^i_j(x),
  \]
  and such that
  \[
    x\comp{i}\overline{x}=\unit{i}{j}(\tgt^i_j(x)) \text{ and } \overline{x}\comp{i}x=\unit{i}{j}(\src^i_j(x)).
  \]
  One can then show that $\overline{x}$ is uniquely determined by
  these properties. When $j=i+1$, we will simply say that $x$ is
  \emph{invertible}.

  For $i \in \N \cup \set{\omega}$, we denote by $\opCat{i}$ the full
  subcategory of $\oCat$ of those \oo-categories such that all
  $k$\nbd-cells with $k>i$ are invertible. One can show that in this
  case all $k$\nbd-cells are actually
  $\comp{j}$\nbd-invertible for any $k > j \geq i$. For $i=0$, we will use the notation $\oGrpd$ instead of $\opCat{0}$
  and refer to the objects of this category as (strict) \oo-groupoids.

  The obvious inclusion functor
  \[
    \opCat{i} \hookrightarrow \oCat
  \]
  hast a left and a right adjoint. In particular, all colimits and
  limits in $\opCat{i}$ are computed in $\oCat$ and this  The left adjoint, denoted by
  \[
    \inv{i} \colon \oCat \to \opCat{i},
  \]
  formally add inverses to all $k$\nbd-cells with $k>i$ (the ``$L$''
  stands for ``localization'').

  Note also that, since all units are invertible, for any $n\in \N$ the inclusion $\nCat{n} \hookrightarrow \oCat$
  factors through $\opCat{n}$
  \[
    \nCat{n} \hookrightarrow \opCat{n} \hookrightarrow \oCat.
  \]

  Finally, for $n\geq 0$, we define
  \[
    \Dsk{n}^{(\omega,i)}:=L_i\Dsk{n}
  \]
  and
  \[
    \Sph{n-1}^{(\omega,i)}:=L_i\Sph{n-1}.
  \]
  Note that if $i \geq n$, $\Dsk{n}^{(\omega,i)}=\Dsk{n}$ and $\Sph{n}^{(\omega,i)}=\Sph{n}$.
\end{paragr}
\begin{paragr}
  Recall that an \oo\nbd-category $C$ is \emph{free on a polygraph} if
  it
  can be obtained from the empty category by recursively freely adding
  cells. More formally, $C$ is free on a polygraph if there exists a
  sequence of subsets of cells
  \[
    (\Sigma_n)_{n \geq 0}, \quad \Sigma_n \subset C_n,
  \]
  such that for any $n \in \N$, the following square is a pushout square
  \[
    \begin{tikzcd}
     \displaystyle \coprod_{x \in \Sigma_n} \Sph{n-1}
     \ar[d]\ar[r,"{\langle \src x, \tgt x \rangle}"] & \trk{n-1}C \ar[d]\\
     \displaystyle \coprod_{x \in \Sigma_n}\Dsk{n} \ar[r,"\langle x \rangle"] & \trk{n}C.
     \ar[from=1-1,to=2-2,phantom, very near end, "\ulcorner"]
    \end{tikzcd}
  \]
  The sequence $(\Sigma_n)_{n \geq 0}$ will be referred to as a \emph{basis} of
  $C$. Similarly, for any $i \in \N$, an \ook{i}\nbd-category $C$ is \emph{free on a
  \ook{i}\nbd-polygraph} if there exists an sequence of subsets of cells
  $(\Sigma_n)_{n \geq 0}$, $\Sigma_n \subset C_n$ such that for each
  $n \geq 0$, the following square is a pushout square
  \[
    \begin{tikzcd}
    \displaystyle \coprod_{x \in \Sigma_n} \Sph{n-1}^{(\omega,i)}
     \ar[d]\ar[r,"{\langle \src x, \tgt x \rangle}"] & \trk{n-1}C \ar[d]\\
     \displaystyle \coprod_{x \in \Sigma_n}\Dsk{n}^{(\omega,i)} \ar[r,"\langle x \rangle"] & \trk{n}C.
     \ar[from=1-1,to=2-2,phantom, very near end, "\ulcorner"]
    \end{tikzcd}
  \]
  The sequence $(\Sigma_n)_{n \geq 0}$ will be referred to as an
\emph{\ook{i}\nbd-basis} of $C$.
\end{paragr}
\begin{remark}\label{rmk:ookpol}
    Note that in the definition of freeness on an \ook{i}\nbd-polygraph,
    the existence of the pushout squares forces $C$ to be an
  \ook{i}\nbd-category, and so it makes sense to speak of an
  \emph{\oo\nbd-category} free on an \ook{i}\nbd-polygraph. However,
  be aware that
  being ``free on a polygraph'' and ``free on an
  \ook{i}\nbd-polyraph'' are very different properties, and an
  \oo\nbd-category free on a \ook{i}\nbd-polygraph is not free on a
  polygraph unless all its cells of dimension greater than $i$ are
  units. This is a generalization of the fact that a free group is free as a monoid only if
  it is trivial.
\end{remark}
\begin{remark}
  For uniformity, we shall sometimes use ``free on an
  \ook{\omega}\nbd-polygraph'' as synonymous to ``free on a
  polygraph''. Similarly, we shall sometimes speak of an ``\ook{\omega}\nbd-basis of
  an \ook{\omega}-category'' as synonymous to a ``basis of an \oo\nbd-category''.
\end{remark}
\begin{paragr}
  The category $\oCat$ can be promoted to a monoidal category via the
  so-called (oplax) Gray tensor product $\tens_{}$ (see
  \cite[Appendix A]{aramaltsiniotis:joint} for example). This monoidal product is
  \emph{not} symmetrical (nor braided), although it is bi-closed, and its unit is the
  terminal category $\Dsk{0}$. As a simple example, the tensor product $\Dsk{1}\otimes\Dsk{1}$ is a square with a
  non-trivial $2$\nbd-cell
  \[
    \begin{tikzcd}[column sep=2pc, row sep=2pc]
      \bullet \ar[r] \ar[d] & \bullet \ar[d]\\
      \bullet \ar[r] & \bullet.
      \ar[to=2-1,from=1-2,Rightarrow,shorten=3mm]
    \end{tikzcd}
  \]
  Similarly, for any $i \in \N$, we can equip the category $\opCat{i}$
  with a monoidal product $\tens_{(\omega,i)}$ (see \cite[section 6]{aralucas:folmon}), which is defined as
  \[
    C \tens_{(\omega,i)}D:=L_i(C \tens_{} D).
  \]
  The unit of this monoidal product is also $\Dsk{0}$. 
\end{paragr}
\begin{remark}
   We shall only use very few formal properties of the Gray
  tensor product, namely \cref{folkmonoidal} and \cref{abelmonoidal} below. Other than this,
  no other knowledge about the Gray tensor product is required to
  understand the present paper.
  % such as the fact that the Gray tensor product of two
  % \oo\nbd-categories free on a polygraph is again free on a polygraph
  % (see \ref{} below), or the fact that a certain abelianization
  % functor is monoidal with respect to this monoidal structure (see
  % \ref{}). 
\end{remark}
\subsection{Discrete Conduché fibrations}
\begin{definition}
  An \oo\nbd-functor $f \colon C \to D$ is a \emph{discrete Conduché
    fibration} if for every $n$\nbd-cell $x$ of $C$ such that $f(x)$
  can be decomposed as
  \[
    f(x)=y\comp{i}y',
  \]
  with $y$ and $y'$ $n$\nbd-cells of $Y$ which are
  $\comp{i}$\nbd-composable ($n >i \geq 0$), there exists a \emph{unique} pair of
  $(z,z')$ of $\comp{i}$\nbd-composables $n$\nbd-cells of $C$, such that
  \[
    f(z)=y\text{ and }f(z')=y'
  \]
  and
  \[
   x= z\comp{i}z'.
  \]
\end{definition}
\begin{proposition}\cite{guettametayer:}
  Let $f \colon C \to D$ be a discrete Conduché fibration. If $D$ is
  free on an \ook{i}\nbd-polygraph, then so is $C$. More precisely, if
  $(\Sigma_n^D)_{n\geq 0}$ is an \ook{i}\nbd-basis of $D$, then
  $(\Sigma_n^C)_{n \geq 0}$, where
  \[
    \Sigma_n^C:=\setof{x \in C_n}{f(x)\in \Sigma_n}
  \]
  is an \ook{i}\nbd-basis of $C$.
\end{proposition}
\subsection{Homotopy theory of $\omega$-categories}
Recall the following fundamental theorem:
\begin{theorem}[Lafont, Métayer, Worytkiewicz \cite{lafontetal:folkms}]\label{folkms}
  There exists a (necessarily unique) model structure on the category
  $\oCat$ such that  every object is fibrant and the cofibrations are generated by the set
    \[
      \setof{\Sph{n-1} \to \Dsk{n}}{n\geq 0}.
    \]
  \end{theorem}
  \begin{paragr}
    This model structure is referred to as the ``folk model
    structure''. Note that every \oo\nbd-category free on a polygraph
    is cofibrant for this model structure.\footnote{In fact, the
      converse is also true \cite{} for $\oCat$, but we won't need
      it.} 
  \end{paragr}
  Cofibrant resolution for this model structure is the most important
  concept of this paper and thus we single it out with the following definition.
  \begin{definition}
  A \emph{polygraphic resolution} of an \oo\nbd-category $C$
    consists of an \oo\nbd-category $P$ which is free on a polygraph and a
    folk trivial fibration
    \[
      P \to C.
    \]
  \end{definition}
  Polygraphic resolution always exists by \cref{folkms}.
  \begin{paragr}
    Similarly, for $i \in \N$, there exists a ``folk'' model structure
    on $\opCat{i}$ (\cite[Theorem 6.19]{aralucas:folmon}), such that every object is fibrant and the
    cofibrations are generated by the set
    \[
      \setof{\Sph{n-1}^{(\omega,i)} \to \Dsk{n}^{(\omega,i)}}{n \geq 0}.
    \]
    In fact, this model structure is right transferred along the adjunction
    \[
      \opCat{i} \leftrightarrows \oCat.
    \]
    In particular, we can unambiguously speak of folk (trivial)
    fibrations in $\opCat{i}$ as they consist exactly of folk
    (trivial) fibrations in $\oCat$. The same is not true for
    cofibrations (cf.\ \ref{rmk:ookrespol})% , and in particular for cofibrant objects, as we have
    % already observed that freenes on a \ook{i}\nbd-polygraph does not
    % imply freeness on a polygraph (see \ref{}).
  \end{paragr}

 
  \begin{definition}
    An \emph{\ook{i}\nbd-polygraphic resolution} of an
    \ook{i}\nbd-category $C$ consists of an \ook{i}\nbd-category $P$ free on an \ook{i}\nbd-polygraph and a folk trivial
    fibration
    \[
      P \to C.
    \]
  \end{definition}
  \begin{remark}\label{rmk:ookrespol}
    Since the $\opCat{i}$ is a subcategory of $\oCat$, it is
    important
    to make the difference between an \ook{i}\nbd-polygraphic resolution of an
    \ook{i}\nbd-category $C$
    and a polygraphic resolution of $C$ (considered as an object of
    $\oCat$). As already noticed in \cref{rmk:ookpol}, an
    \oo\nbd-category free on an \ook{i}\nbd-polygraph is almost never
    free on a polygraph. As a consequence, even though trivial
    fibrations in $\opCat{i}$ and $\oCat$ are the same, a
    polygraphic resolution in $\oCat{i}$ is almost never a polygraphic
    resolution in $\oCat$. Intuitively speaking, in the later case the
    resolution is ``much more resolved'' because we also need to
    resolve the invertibility of higher cells.
  \end{remark}
    \begin{proposition}\cite[Theorems 5.6 \& 6.21]{aralucas:folmon}\label{folkmonoidal}
    The folk model structure on $\oCat$ is monoidal for the Gray
    tensor product. More generally, for $i \in \N$, the folk model
    structure on $\opCat{i}$ is monoidal with respect to
    $\tens_{(\omega,i)}$. 
  \end{proposition}
  % \begin{corollary}
    
  % \end{corollary}
\subsection{Abelianization of $\omega$-categories}
\begin{paragr}
  Let $C$ be an \oo\nbd-category. Recall that we denote by
  $\lambda(C)$ the chain complex such that
  \[
    \lambda_n(C):=\Z C_n/\sim,
  \]
  where $\sim$ is the congruence generated by
  \[
    x \comp{i} y \sim x + y
  \]
  whenever it makes sense. The differential is defined as
  \[
    \begin{aligned}
      \lambda_{n}(C) &\to \lambda_{n+1}(C)\\
      [x] &\mapsto [\tge{x}]-[\sce{x}].
    \end{aligned}
  \]
  The fact that $\partial \circ \partial=0$ follows immediately from
  the globular identities.

  This construction is easily seen to be functorial and thus provides
  a so-called ``abelianization'' functor
  \[
    \lambda \colon \oCat \to \Chp.
  \]
  % Recall that for any $i \in \N\cup \set{\omega}$, the category
  % $\opCat{i}$ is a subcategory of $\oCat$, and thus it makes sense for
  % an object $C$ of $\opCat{i}$ to consider the chain complex
  % $\lambda(C)$.
  More generally, for any $i \in \Ni$, by precomposition with the
  inclusion functor $\opCat{i}\hookrightarrow \oCat$, we get an
  abelianization functor, detoned the same,
  \[
    \lambda \colon \opCat{i} \to \Chp.
  \]
\end{paragr}
% \begin{lemma}\label{lemma:abelpol}
%   Let $C$ be an \ook{i}\nbd-category, with $i \in \N\cup
%   \set{\omega}$, and suppose that $C$ is free on a polygraph in $\opCat{i}$. For $\Sigma_n$ a set of $n$\nbd-dimensional generators (which is not
%   unique in general if $n>i$), then the canonical map
%   \[
%     \Z \Sigma_n \to \lambda_n(C)
%   \]
%   induced by inclusion is an isomorphism.
% \end{lemma}


\begin{lemma}\label{lemma:abelpol}
  Let $C$ be an \ook{i}\nbd-category, with $i \in \N\cup\set{\omega}$
  and suppose that $C$ is free on an \ook{i}\nbd-polygraph, and let
  $(\Sigma_n)_{n\geq 0}$ an \ook{i}\nbd-basis of $C$. Then there
  exists a unique function
  \[
    \begin{aligned}
      C_n &\to \Z\Sigma_n\\
      x &\mapsto \tw{x}
    \end{aligned}
  \]
  such that:
  \begin{itemize}
    \item if $\alpha \in \Sigma_n$, then $\tw{\alpha}=\alpha$ (seen as a generator of
      $\Z\Sigma_n$),
    \item for $x$ and $y$ $\comp{i}$\nbd-composables, we have $\tw{x\comp{i} y}=\tw{x}+\tw{y}$.
    \end{itemize}
    Moreover, this function induces an isomorphism
    \[
      \lambda_n(C) \overset{\simeq}{\longrightarrow} \Z\Sigma_n.
    \]
  \end{lemma}
  \begin{paragr}
  With the same notations as the above lemma, for each $\alpha \in
  \Sigma_n$, we can also consider the projection $\Z \Sigma_n \to \Z
  \langle \alpha \rangle \simeq \Z$, and thus we get a
  function
  \[
    \wght{\alpha} \colon C_n \to \Z
  \]
  such that:
  \begin{itemize}
    \item for $\beta \in \Sigma_n$, $\wght{\alpha}(\beta)=1$ if $\beta=\alpha$ and $\wght{\alpha}(\beta)=0$
      otherwise,
    \item for $x,y \in C_n$ that are $\comp{i}$\nbd-composable, $\wght{\alpha}(x\comp{i}y)=\wght{\alpha}(x)+\wght{\alpha}(y)$.
    \end{itemize}
    It can be shown that, for each $\alpha \in \Sigma_n$, $\wght{\alpha}$ is the unique function which
    satisfies these properties. We refer to these functions as \emph{weight functions}. We thus
    have
    \[
      \tw{x}=\sum_{\alpha \in \Sigma_n}\wght{\alpha}(x)\cdot \alpha.
    \]
\end{paragr}
The following proposition follows immediatly.
\begin{proposition}
  Let $C$ be an  \ook{i}\nbd-category, with $i \in \N\cup
  \set{\omega}$. Suppose that $C$ is free on a polygraph in
  $\opCat{i}$ and let $(\Sigma_n)_{n \geq 0}$ be a basis of $C$. The
  chain complex $\lambda_n(C)$ is isomorphic to
  \[
    \Z \Sigma_0 \leftarrow \Z \Sigma_1 \leftarrow \cdots,
  \]
  where the differential is given on generators by
  \[
    \partial(x)=\tw{\tge{x}}-\tw{\sce{x}}.
  \]
\end{proposition}

\begin{proposition}\label{abelmonoidal}
  For any $i \in \Ni$, the abelianization functor
  \[\lambda \colon \opCat{i} \to \Chp\]
  is monoidal with respect to the Gray tensor product
  $\tens_{(\omega,i)}$ on $\opCat{i}$ and the usual tensor product on
  $\Chp$.
\end{proposition}
\begin{proposition}
  For any $i \in \N\cup{\omega}$, the abelianization functor
  \[\lambda \colon \opCat{i} \to \Chp\]
  is left Quillen with respect to the folk model structure on
  $\opCat{i}$ and the projective model structure on $\Chp$.
\end{proposition}
\section{Resolutions of modules from polygraphic resolutions}
\subsection{Polygraphic homology with coefficient}
\begin{paragr}
  Let $C$ be a small category and $u \colon c \to d$ a morphism of
  $C$. We define the category $\tr{C}{u}$ in the following fashion
  \begin{itemize}
  \item an object is a triple $(x,f,g)$, where $x$ is an object of
    $C$, $f \colon c \to x$ and $g \colon x \to d$ such that $u=gf$
    \[
      \begin{tikzcd}[column sep=tiny]
        &x\ar[dr,"g"]&\\
        c \ar[ur,"f"]\ar[rr,"u"'] & &d
      \end{tikzcd}
    \]
  \item a morphism $(x,f,g) \to (x',f',g')$ consists of a morphism $h
    \colon x \to x'$ such that $h f = f'$ and $g h=g'$,
    i.e.\ a ``morphism of factorisations''
    \[
      \begin{tikzcd}
        & x \ar[dr,"g"]\ar[dd,"h"]&\\
        c \ar[ur,"f"] \ar[dr,"f'"'] & & d \\
        & x'. \ar[ur,"g'"']& 
      \end{tikzcd}
    \]
    % such that the following diagram is commutative
    % \[
    %   \begin{tikzcd}
    %     &x'\ar[rdd,"g'"]&\\
    %     &x\ar[dr,"g"']\ar[u,"h" near start]&\\
    %     c \ar[ur,"f"']\ar[rr,"u"']\ar[uur,"f'"] & &d.
    %   \end{tikzcd}
    %   \]
    \end{itemize}
    The composition and units are defined in the obvious way. Notice that a morphism $h \colon (x,f,g) \to (x',f',g')$ is
    completely determined by the data of $f$, $h$ and $g'$, such that
    $g'hf = u$. This last equality means exactly that the pair
    $(f,g')$ is a morphism from $h$ to $u$ in the category
    $\Tw{C}$. All in all, we
    have the following useful alternative description, which we shall
    use often:
    \begin{itemize}
    \item a morphism of $\tr{C}{u}$ consists of a triple $(h,f,g')$
      such that $h$ is a morphism of $C$ and $(f,g')$ is an arrow of
      $\Tw{C}$ from $h$ to $u$
      \[
        \begin{tikzcd}
          x \ar[r,"h"]& x' \ar[d,"g'"]\\
          c\ar[u,"f"] \ar[r,"u"] & d.
        \end{tikzcd}
      \]
      The source of $(h,f,g')$ is the triple $(x,f,g'h)$ and the target
      is the triple $(x,hf,g')$.
    \end{itemize}
    
    % It is useful to notice that we have an bijection of sets
    % \[
    %   \Mor(\tr{C}{u}) \simeq \coprod_{h \in \Mor(C)}\homset{\Tw{C}}{\id_{\tge{h}}}{u}.
    % \]
    % In other uords, a morphism of 
  \end{paragr}
  \begin{remark}
    Note that there are canonical projection functors
    \[
      \begin{aligned}
        \tr{C}{u} &\to \tr{C}{d}\\
        (x,f,g) &\mapsto (x,g)
      \end{aligned}
    \]
    and
    \[
      \begin{aligned}
        \tr{C}{u} &\to \cotr{C}{c}\\
        (x,f,g) &\mapsto (x,f).
      \end{aligned}
    \]
  \end{remark}
  \begin{lemma}\label{lemma:projcond}
    The canonical projection functor
    \[
      \begin{aligned}
        \tr{C}{u} &\to C\\
        (x,f,g) &\mapsto x
      \end{aligned}
    \]
    is a discrete Conduché fibration. 
  \end{lemma}
  \begin{proof}
    Let $h \colon (x,f,g) \to (x',f',g')$ be a morphism of
    $\tr{C}{u}$, and $h_1 \colon x \to x''$ and $h_2 \colon x'' \to
    x'$ morphisms in $C$ such that $h=h_2h_1$. Then the morphisms $h_1
    \colon (x,f,g) \to (x'',h_1f,gh_2)$ and $h_2 \colon
    (x'',h_1f,gh_2) \to (x,f',g')$ satisfy $h_2h_1=h$ in
    $\tr{C}{u}$. The uniqueness of such a decomposition is easy to check.
  \end{proof}
  \begin{lemma}
    The category $\tr{C}{u}$ has both an initial and terminal object.
  \end{lemma}
  \begin{proof}
    The initial object is given by $(c,\id_{c},u)$ and the terminal
    object by $(d,u,\id_{d})$.
  \end{proof}

  \begin{paragr}\label{paragr:slicepol}
    Let $C$ be a $\pair{1}{k}$\nbd-category with $k \in \set{0,1}$
    (i.e.\ either a groupoid or a category), and let
    \[
       P \to C
    \]
    be a polygraphic resolution in $\opCat{i}$ for some $i \geq
    k$. Namely, this means that $P$ is free on a \ook{i}-polygraph and
    $P\to C$ is a trivial fibration. For $x$ an $n$\nbd-cell of $P$,
    let us denote by $\overline{x}$ its image in $C$ by this trivial
    fibration. Note that for $n>1$, this is necessarily a degenerate
    $1$\nbd-cell because $C$ is a $1$\nbd-category. We shall abusively
    use the
    same notation $\overline{x}$ for this unique $1$\nbd-cell of $C$.
  \end{paragr}
  \begin{paragr}
    For every arrow $u\colon c \to d$ of $C$, we define an
    \ook{i}\nbd-category $\tr{P}{u}$ as the following fibred product
    \[
      \begin{tikzcd}
        \tr{P}{u} \ar[r] \ar[d] & P \ar[d] \\
        \tr{C}{u} \ar[r] & C.
        \ar[from=1-1,to=2-2,phantom,"\lrcorner" very near start]
      \end{tikzcd}
    \]
    Explicitly, an $n$\nbd-cell of $\tr{P}{u}$ consists of a
      triple $(\alpha,f,g)$, where $\alpha$ is an $n$\nbd-cell of $P$,
      $f \colon c \to \src{0}\overline{\alpha}$ and $g \colon
      \tgt{0}\overline{\alpha}\to d$ are arrows of $C$ such that
      $g\overline{\alpha}f=u$ (with the convention that for $n=0$,
      $\src{0}\alpha=\tgt{0}\alpha=\alpha$). The sources
      and targets are given by
      \[
        \sce{(\alpha,f,g)}=\begin{cases}
          (\sce{}\alpha,f,g)& \text{ if } n>1, \\
          (\sce{}\alpha,f,g\overline{\alpha})& \text{ if } n=1
          \end{cases}
        \]
        and
        \[
          \tge{(\alpha,f,g)}=\begin{cases}
          (\tge{}\alpha,f,g)& \text{ if } n>1, \\
          (\tge{}\alpha,\overline{\alpha}f,g)& \text{ if } n=1.
          \end{cases}
        \]
    By stability of the class of discrete Conduché fibrations under
    pullback, it follows from \cref{lemma:projcond} that the morphism
    $\tr{P}{u}\to P$ is a discrete Conduché fibration, and thus by
    \ref{} $\tr{P}{u}$ is free on an
    \ook{i}\nbd-polygraph. Explicitly, if $\Sigma_n$ is an
    $n$\nbd-base of $P$, then an $n$\nbd-base of $\tr{P}{u}$ is given
    by
    \[
      \tr{\Sigma_n}{u}:=\setof{(\alpha,f,g)}{\alpha \in \Sigma_n}.
    \]
    In fact,
    we will show a stronger freeness property in
    \cref{prop:cofprojresol} below. Similarly, by
    stability of the class of trivial fibration by pullback, it
    follows that \[\tr{P}{u} \to \tr{C}{u}\] is a trivial fibration,
    and thus a polygraphic resolution in $\opCat{i}$.
  \end{paragr}
  \begin{definition}
    A \oo\nbd-category $C$ is \emph{oplax left contractible} if
    there exists an object $x_0$ of $C$ and an oplax transformation
    \[
      \begin{tikzcd}
        C \ar[r] \ar[dr,""{name=toto},"\id_{C}"'] & \Term
        \ar[d," x_0"] \\
        & C,
        \ar[from=toto,to=1-2,Rightarrow,"\eta"]
      \end{tikzcd}
    \]
    where $\Term$ is the terminal category.% , such that the composite
    % \[
    %   \begin{tikzcd}
    %     \Term \ar[r,"x_0"]& C\ar[r,bend left,""{name=A,below}]
    %     \ar[r,bend right,""{name=B,above}]& C
    %     \ar[from=A,to=B,"\eta",Rightarrow]
    %   \end{tikzcd}
    % \]
    % is the identity transformation on $\Term
    % \overset{x_0}{\longrightarrow} C$.

    Dually, $C$ is \emph{oplax right contractible} if there exists an
    object $y_0$ of $C$ and an oplax transformation
          \[
      \begin{tikzcd}
        C \ar[r] \ar[dr,""{name=toto},"\id_{C}"'] & \Term
        \ar[d," y_0"] \\
        & C.
        \ar[from=1-2,to=toto,Rightarrow,"\epsilon"]
      \end{tikzcd}
    \]
    %  such that the composite
    % \[
    %   \begin{tikzcd}
    %     \Term \ar[r,"y_0"]& C\ar[r,bend left,""{name=A,below}]
    %     \ar[r,bend right,""{name=B,above}]& C
    %     \ar[from=A,to=B,"\epsilon",Rightarrow]
    %   \end{tikzcd}
    % \]
    % is the identity transformation on $\Term
    % \overset{y_0}{\longrightarrow} C$.
  \end{definition}
  \begin{example}
    Since oplax transformations between functors into a
    ($1$\nbd-)category are simply natural transformations, it follows
    that a ($1$\nbd-)category that has an terminal (resp.\ initial) object is oplax
    left (resp.\ right) contractible.
  \end{example}
  % \begin{remark}
  %   In the case that $C$ is a $1$\nbd-category, this is equivalent to
  %   the usual notions of initial and terminal objects, since oplax
  %   transformations then reduces to natural transformations.
  % \end{remark}
  \begin{lemma}\label{lemma:oplaxterm}
  The \oo\nbd-category $\tr{P}{u}$ is both left and right oplax contractible.
  \end{lemma}
  \begin{proof}
    As already observed, $\tr{C}{u}$ both has a terminal and a initial
    objects, hence it is both oplax left and right contractible. Let us treat the case of
    oplax left contractibility of $\tr{P}{u}$, as the other one can be
    deduced by duality.

    Since $P \to C$ is a trivial fibration, there exists an object $x$
    of $P$ which is sent to $d=\tge{u}$. It follows that the object
    $(x,u,\id_d)$ of $\tr{P}{u}$ is sent to the terminal object
    $(d,u,\id_d)$ of $\tr{C}{u}$. Consider now the following
    commutative diagram
    \[
      \begin{tikzcd}
        \Sph{0}\tens_{\omega,i}\tr{P}{u} \ar[r] \ar[d] & \tr{P}{u} \ar[d]\\
        \Dsk{1}\tens_{\omega,i}\tr{P}{u} \ar[r] & \tr{C}{u},
      \end{tikzcd}
    \]
    where the top arrow is
    \[
      \begin{tikzcd}[column sep=huge]
      \Sph{0}\tens_{\omega,i}\tr{P}{u} \simeq \tr{P}{u}\coprod\tr{P}{u}
      \ar[r,"{\langle\id,\mathrm{cst}_{(x,u,\id_d)}\rangle}"]&\tr{P}{u}
      \end{tikzcd}
    \]
    and the bottow arrow is
    \[
      \Dsk{1}\tens_{\omega,i}\tr{P}{u} \to
      \Dsk{1}\tens_{\omega,i}\tr{C}{u} \overset{\eta}{\longrightarrow}
       \tr{C}{u},
     \]
     where $\eta$ is the oplax transformation witnessing $(d,u,\id_d)$
     as a terminal object of $\tr{C}{u}$. 
    Since $\tr{P}{u}\to \tr{C}{u}$ is a trivial fibration and
    $\Sph{0}\tens_{\omega,i}\tr{P}{u} \to \Dsk{1}\tens_{\omega,i}\tr{P}{u}$ is a
    cofibration, there exists a lift $\Dsk{1}\tens_{\omega,i}\tr{P}{u}
    \to \tr{P}{u}$ that makes the previous square commutative. This
    gives the desired oplax transformation.
    % $\tr{P}{w} \to \tr{C}{w}$ is a trivial fibration, it is in
    % particular surjective on objects. Hence, there exists an object
    % $x$ of $P$
  \end{proof}
  \begin{paragr}
      Keeping the notation of \ref{paragr:slicepol}, the construction of $u\mapsto \tr{C}{u}$ extends to a canonical functor
    \[
        \tr{C}{-}\colon \Tw{C} \to \Cat,
      \]
      where an arrow $(f,g) \colon u \to u'$ of $\Tw{C}$ is sent to the functor
      \[
        \begin{aligned}
          \tr{C}{u} &\to \tr{C}{u'}\\
          (x,p,q) &\mapsto (x,pf,gq)\\
          (h,p,q) &\mapsto (h,pf,gq).
        \end{aligned}
      \]
      
    A similar construction allows to define a functor
    \[
      \begin{aligned}
       \tr{P}{-}\colon \Tw{C} &\to \opCat{i} \\
        u &\mapsto \tr{P}{u}.
      \end{aligned}
    \]
  \end{paragr}
  \begin{proposition}\label{prop:cofprojresol}
    Let $C$ be a $\pair{1}{k}$\nbd-category with $k \in \set{0,1}$
    (i.e.\ either a category or a groupoid), and $P \to C$ a
    polygraphic resolution in $\opCat{i}$, for some $i\in
    \N\cup\set{\omega}$ such that $i\geq k$. The functor
    \[
      \tr{P}{-} \colon \Tw{C} \to \opCat{i},
    \]
   is cofibrant for the projective model structure on $\fun{\Tw{C}}{\opCat{i}}$.
  \end{proposition}
  \begin{proof}
    Let $u\colon c \to d$ be a morphism of $C$ and let $(\Sigma_n)_n$
    be a basis of $P$. As we have already seen, the canonical morphism
    \[
      \tr{P}{u} \to P,
    \]
    is a Conduché fibration and thus $\tr{P}{u}$ is free on an
    \ook{i}\nbd-polygraph, with a basis given by $(\tr{\Sigma_n}{u})_n$
    with
    \[
      \tr{\Sigma_n}{u}:=\setof{(\alpha,f,g)}{\alpha \in
        \Sigma_n}\simeq \coprod_{\alpha \in \Sigma_n}\homset{\Tw{C}}{\overline{\alpha}}{u}.
    \]
    In other words, for any $n > 0$, we have the following pushout
    square in \ook{i}
    \[
      \begin{tikzcd}
        \displaystyle\coprod_{\alpha \in \Sigma_n}\coprod_{\homset{\Tw{C}}{\overline{\alpha}}{u}}\Sph{n-1} \ar[r]\ar[d] &
        \trk{n-1}(\tr{P}{u}) \ar[d] \\
            \displaystyle \coprod_{\alpha \in \Sigma_n}\coprod_{\homset{\Tw{C}}{\overline{\alpha}}{u}}\Dsk{n} \ar[r] &
            \trk{n}(\tr{P}{u})
            \ar[from=1-1,to=2-2, phantom, very near end,"\ulcorner"]
      \end{tikzcd}
    \]
    It is straightforward to check that this pushout square is
    natural in $u$, and thus defines a pushout square in the category
    $\fun{\Tw{C}}{\opCat{i}}$. Since for any morphism $v$ of $C$, the morphism
    \[
      \coprod_{\homset{\Tw{C}}{v}{-}}\Sph{n-1}\to \coprod_{\homset{\Tw{C}}{v}{-}}\Dsk{n}
    \]
    is a cofibration for the projective model structure on
    $\fun{\Tw{C}}{\opCat{i}}$ induced by the folk model structure on
    $\opCat{i}$, it follows that
    \[
      \trk{n-1}(\tr{P}{-}) \to \trk{n}(\tr{P}{-})
    \]
    is also a cofibration for the projective model structure. By
    stability of cofibrations by transfinite composition, it follows
    that $\tr{P}{-}$ is cofibrant.
  \end{proof}
  \begin{paragr}
    Keeping the notations from the previous proposition, by applying
    the abelianization functor $\lambda$, we get a augmented chain
    complex of left $\Tw{C}$\nbd-modules
    \[
      \cst{\Z} \leftarrow \lambda_0(\tr{P}{-}) \leftarrow
      \lambda_1(\tr{P}{-}) \leftarrow \cdots,
    \]
    where the augmentation $\cst{\Z} \leftarrow \lambda_0(\tr{P}{-})$
    is induced by the canonical morphism $\tr{P}{u} \to \Term$, which
    is obviously natural in $u$.
  \end{paragr}
  The fundamental theorem of polygraphic homology is the following.
  \begin{theorem}\label{fundthm}
       Let $C$ be a $\pair{1}{k}$\nbd-category with $k \in \set{0,1}$
    (i.e.\ either a category or a groupoid), and $P \to C$ a
    polygraphic resolution in $\opCat{i}$, for some $i\in
    \N\cup\set{\omega}$ such that $i\geq k$. The augmented chain
    complex of left $\Tw{C}$\nbd-modules
        \[
      \cst{\Z} \leftarrow \lambda_0(\tr{P}{-}) \leftarrow
      \lambda_1(\tr{P}{-}) \leftarrow \cdots,
    \]
    is a projective resolution of $\cst{\Z}$.
  \end{theorem}
  \begin{proof}
    Recall that the abelianization functor $\lambda \colon \opCat{i}
    \to \Chp$ is monoidal with respect to the Gray tensor product on
    $\opCat{i}$ and the usual tensor product of chain complexes on
    $\Chp$, and is left Quillen with respect to the folk model
    structure on $\opCat{i}$ and the \emph{projective} model structure
    on $\Chp$. The fact that each $\lambda_i(\tr{P}{-})$ is projective then
    follows from \cref{prop:cofprojresol} and the fact that $\lambda$
    is left Quillen.
    The fact that the augmented chain complex $\Z \leftarrow
    \lambda_{\bullet}(\tr{P}{u})$ is a resolution of $\Z$ for any $u$
    follows from \cref{lemma:oplaxterm} and the fact that, since $\lambda$ is
    monoidal, it sends oplax transformation to homotopies of chain complexes.  This proves the result since homology in the category of
    left $\Tw{C}$\nbd-modules is computed pointwise.
  \end{proof}
    \lgcomment{Je pense que c'est là que se cache le loup dans la
    section 23.3 du polybook. Ce complexe
  de chaînes est décrit ``à la main'' et on retrouve bien les
  $n$-chaines du paragrphe
  \ref{paragr:descres} ci-contre. Par contre, il me semble que la
  description de la différentielle donnée dans le polybook n'est pas
  suffisante car ne sont décrits que les images des générateurs de la
  forme $(\alpha,\id,\id)$. Dans l'approche que j'ai pris je sais formellement que
  cette différentielle existe car
  je sais que complexe de chaînes est l'abélianisé d'un polygraphe
  (grâce à la technique avec Conduché), et la description de la
  différentielle se déduit alors des formules générales.}
  \begin{paragr}\label{paragr:descres}
    We keep the notations from \cref{fundthm}. We can be more
    precise as the resolution
    \[
      \cst{\Z} \leftarrow \lambda_0(\tr{P}{-}) \leftarrow
      \lambda_1(\tr{P}{-}) \leftarrow \cdots
    \]
    is actually a \emph{free} resolution of left
    $\Tw{C}$\nbd-modules. %  To see
    % that, let $(\Sigma_n)_{n}$ be a basis of $P$. It follows from
    % \ref{} that for every morphism $w\colon c \to d$ of $C$, $\tr{P}{w}$ as for
    % basis $(\tr{\Sigma_n}{u})_n$, where
    % \[
    %   \tr{\Sigma_n}{w}:=\coprod_{x \in \Sigma_n}\homset{\Tw{C}}{\pi(\tgt{0}(x))}{w},
    % \]
    % that is to say that a generating $n$\nbd-cell of $\tr{P}{w}$ consists of a
    % triple $(x,f,g)$, where $x \in \Sigma_n$, $f \colon c \to
    % \pi(\tgt{0}(x))$ and $g \colon \pi(\tgt{0}(x)) \to d$ are arrows
    % of $C$ such that
    % \[
    %   w=gf.
    % \]
    Indeed, if $(\Sigma_n)_n$ is a basis of $P$, it follows from
    \cref{lemma:abelpol} and paragraph \ref{paragr:slicepol} that the resolution takes the form
    \[
       \cst{\Z} \leftarrow \bigoplus_{\alpha \in \Sigma_0}\Z
       \homset{\Tw{C}}{\id_{\overline{\alpha}}}{-} \leftarrow \bigoplus_{\alpha \in \Sigma_1}\Z
       \homset{\Tw{C}}{\overline{\alpha}}{-} \leftarrow % \bigoplus_{\alpha \in \Sigma_2}\Z
       % \homset{\Tw{C}}{\overline{\alpha}}{-} \leftarrow
       \cdots
     \]
     Let $u$ be an arrow of $C$. For $n>1$, the differential
     \[
       \partial \colon \bigoplus_{\alpha \in
         \Sigma_{n}}\Z\homset{\Tw{C}}{\overline{\alpha}}{u} \to \bigoplus_{\alpha \in
         \Sigma_{n-1}}\Z\homset{\Tw{C}}{\overline{\alpha}}{u}
     \]
     is given on generators by the formula
     \[
       \partial(\alpha,f,g)=\sum_{\beta \in
         \Sigma_{n-1}}\sum_{(h,i)\in
         \homset{\Tw{C}}{\overline{\beta}}{u}}(\wght{(\beta,h,i)}(\tgt{\alpha},f,g)
       -\wght{(\beta,h,i)}(\src{\alpha},f,g))\cdot(\beta,h,i),
     \]
     and for $n=1$, by the formula
     \[
       \partial(\alpha,f,g)=\sum_{\beta \in \Sigma_0}\sum_{(h,i)\in \homset{\Tw{C}}{\id_{\overline{\beta}}}{u}}\wght{(\beta,h,i)}(\tgt{\alpha},\overline{\alpha}f,g)-\wght{(\beta,h,i)}(\src{\alpha},f,g\overline{\alpha}).
     \]
  \end{paragr}
  We then deduce the following theorem, which says that the homology
  of $C$ with coefficient in a natural system is given by the
  polygraphic complex ``twisted'' by the natural system.
  \begin{theorem}\label{polhom}
    Let $C$ be a $\pair{1}{k}$\nbd-category with $k \in \set{0,1}$
    (i.e.\ either a category or a groupoid) and $\M$ be a natural
    system over $C$. Then, for any $i\in
    \N\cup\set{\omega}$ such that $i\geq k$, and any $P \to C$ 
    polygraphic resolution in $\opCat{i}$, with a given basis
    $(\Sigma_n)_{n\geq 0}$, the Baues-Wirsching
    homology $\Ho^{BS}_{\bullet}(C,\M)$ is isomorphic to the homology
    of the chain complex
\[         \bigoplus_{\alpha \in \Sigma_0}\M_{\id_\alpha}\leftarrow \bigoplus_{\alpha \in
        \Sigma_1}\M_{\overline{\alpha}} \leftarrow \bigoplus_{\alpha \in
        \Sigma_2}\M_{\overline{\alpha}} \leftarrow \cdots,
    \]
    where the differential is given by
    \[
      \partial(\alpha,m)=\sum_{\beta \in
        \Sigma_{n-1}}\left(\beta,\sum_{(f,g)\in
        \homset{\Tw{C}}{\beta}{\overline{\alpha}}}(\wght{(\beta,f,g)}(\tgt{\alpha})-\wght{(\beta,f,g)}(\src{\alpha}))\cdot
      (f^*,g_*)(m)\right)
  \]
  \end{theorem}

  % \begin{corollary}\label{polhom}
  %   Let $C$ be a $\pair{1}{k}$\nbd-category with $k \in \set{0,1}$
  %   (i.e.\ either a category or a groupoid) and $\M$ be a natural
  %   system over $C$. Then, for any $i\in
  %   \N\cup\set{\omega}$ such that $i\geq k$, and any $P \to C$ 
  %   polygraphic resolution in $\opCat{i}$, the Baues-Wirsching
  %   homology $\Ho^{BS}_{\bullet}(C,\M)$ is isomorphic to the homology
  %   of the chain complex
  %   \[
  %      \M \tens_{\Z \Tw{C}}\lambda_0(\tr{P}{-})\leftarrow
  %     \M \tens_{\Z \Tw{C}}\lambda_1(\tr{P}{-}) \leftarrow \cdots
  %   \]
  % \end{corollary}

  % \begin{paragr}
  %   Keeping the notations from \cref{polhom}, we can be more
  %   precise. Let $(\Sigma_n)_n$ be a basis of $P$, then the
  %   Baues-Wirsching homology
  %   of $C$ with coefficient in $\M$ is isomorphic to the chain complex
  %   \[
  %     \bigoplus_{x \in \Sigma_0}\M_{\id_x}\leftarrow \bigoplus_{x \in
  %       \Sigma_1}\M_{\overline{x}} \leftarrow \bigoplus_{x \in
  %       \Sigma_2}\M_{\overline{x}} \leftarrow \cdots
  %   \]
  %   In particular, if we take $\M=\cst{\Z}$, then we recover the usual
  %   complex defining the polygraphic homology. This shows in particular that
  %   the homology of a $1$\nbd-category (resp.\ a groupoid) can be
  %   computed using polygraphic resolutions in strict
  %   \ook{1}\nbd-categories (resp.\ strict \oo\nbd-groupoids). The same
  %   goes for any kind of coefficient (e.g.\ $C$\nbd-module).
  % \end{paragr}
% \begin{paragr}
%   Let $C$ be a $(1,k)$\nbd-category for $k\in \set{0,1}$ (i.e.\ either
%   a groupoid or a category), let
%   \[
%     \pi \colon \frcat{P} \to C
%   \]
%   be a polygraphic resolution in $\opCat{i}$ with $i\in
%   \N\cup\set{\omega}$ such that $i \geq k$. Notice that since $C$ is a
%   $1$\nbd-category, for any $n$\nbd-cell of $P$ with $n\geq 1$,
%   $\pi(x)$ is the iterated identity of a unique $1$\nbd-cell (i.e.\ an
%   arrow) of $C$. We will also denote this arrow by $\pi(x)$.

  
%   Now, let $\M$ a natural system over $C$, we define a chain complex
%   $\lambda(P,\M)$ as follows. For $n=0$, we set
%   \[
%     \lambda_0(P,\M):=\bigoplus_{x \in P_0}\M_{\id_x}
%   \]
%   For $n\geq 1$, we set
%   \[
%     \lambda_n(P,\M):=\bigoplus_{x \in P_n} \M_{\pi(x)}.
%   \]
%   For $n=1$, the differential $\partial_1$ is defined as
%   \[
%     \begin{aligned}
%       \lambda_1(P,\M)&\to \lambda_0(P,\M)\\
%       (x,m)&\mapsto (t(x),)-(s(x),)
%     \end{aligned}
%   \]
% \end{paragr}
  \bibliographystyle{plain}
  \bibliography{biblio}
\end{document}